<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Java/20230309" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">@Bean 与 @Component 用在同一个类上，会怎么样？ | Vincents Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vweitech.github.io/my-website/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vweitech.github.io/my-website/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vweitech.github.io/my-website/zh-Hans/docs/Java/20230309"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="@Bean 与 @Component 用在同一个类上，会怎么样？ | Vincents Site"><meta data-rh="true" name="description" content="疑虑背景"><meta data-rh="true" property="og:description" content="疑虑背景"><link data-rh="true" rel="icon" href="/my-website/zh-Hans/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vweitech.github.io/my-website/zh-Hans/docs/Java/20230309"><link data-rh="true" rel="alternate" href="https://vweitech.github.io/my-website/docs/Java/20230309" hreflang="en"><link data-rh="true" rel="alternate" href="https://vweitech.github.io/my-website/zh-Hans/docs/Java/20230309" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://vweitech.github.io/my-website/docs/Java/20230309" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/my-website/zh-Hans/blog/rss.xml" title="Vincents Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/my-website/zh-Hans/blog/atom.xml" title="Vincents Site Atom Feed"><link rel="stylesheet" href="/my-website/zh-Hans/assets/css/styles.92192669.css">
<script src="/my-website/zh-Hans/assets/js/runtime~main.42e96755.js" defer="defer"></script>
<script src="/my-website/zh-Hans/assets/js/main.d2bf0b1c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/my-website/zh-Hans/"><div class="navbar__logo"><img src="/my-website/zh-Hans/img/logo.svg" alt="Vincents Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/my-website/zh-Hans/img/logo.svg" alt="Vincents Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Vincents Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/my-website/zh-Hans/docs/AWS/20241218">Study Notes</a><a class="navbar__item navbar__link" href="/my-website/zh-Hans/blog">Blog</a><a class="navbar__item navbar__link" href="/my-website/zh-Hans/book/intro">Book</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VWeiTech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/AWS/20241218">AWS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/AcronymGlossary/VCDPAcronymGlossary">AcronymGlossary</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/Computer/Mac/20240925">Computer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/Database/20230329">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/Docker/20230327">Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/my-website/zh-Hans/docs/Java/20230309">Java</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230309">@Bean 与 @Component 用在同一个类上，会怎么样？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230328">Spring 事务—事务的传播机制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230725">在@SpringBootTest中JasyptAutoConfiguration没有自动创建bean</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230801">RPC远程调用时，出现错误（413 Request Entity Too Large）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230810">Spring MVC中过滤器和拦截器的区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230814">在build.gradle.kts文件中 plugin kotlin(&quot;jvm&quot;)和kotlin(&quot;plugin.spring&quot;)什么作用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20230818">How to disable zipkin reporter in spring boot 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20240711">Difference Between a Java Keystore and a Truststore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20240716">What is Unified Modeling Language (UML)?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/zh-Hans/docs/Java/20241107">Schema Registry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/Linux/20230525">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-website/zh-Hans/docs/VersionControl/20240711">VersionControl</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/my-website/zh-Hans/docs/intro">intro</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/my-website/zh-Hans/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">@Bean 与 @Component 用在同一个类上，会怎么样？</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>@Bean 与 @Component 用在同一个类上，会怎么样？</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="疑虑背景">疑虑背景<a href="#疑虑背景" class="hash-link" aria-label="疑虑背景的直接链接" title="疑虑背景的直接链接">​</a></h2>
<p>引用 <a href="https://mp.weixin.qq.com/s/IyTXK1IdpujZQNA81DK2Qg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/IyTXK1IdpujZQNA81DK2Qg</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="疑虑描述">疑虑描述<a href="#疑虑描述" class="hash-link" aria-label="疑虑描述的直接链接" title="疑虑描述的直接链接">​</a></h3>
<p>最近，在进行开发的过程中，发现之前的一个写法，类似如下</p>
<p><img decoding="async" loading="lazy" alt="img.png" src="/my-website/zh-Hans/assets/images/img-a47c4ab2000578966d6517733a4a04d3.png" width="552" height="830" class="img_ev3q"><br>
<!-- -->以我的理解，@Configuration 加 @Bean 会创建一个 userName 不为 null 的 UserManager 对象，而 @Component
也会创建一个userName为null的UserManager对象那么我们在其他对象中注入 UserManager
对象时，到底注入的是哪个对象？因为项目已经上线了很长一段时间了，所以这种写法没有编译报错，运行也没有出问题后面去找同事了解下，实际是想让</p>
<p><img decoding="async" loading="lazy" alt="img_1.png" src="data:image/png;base64,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" width="510" height="164" class="img_ev3q"></p>
<p>生效，而实际也确实是它生效了那么问题来了：Spring 容器中到底有几个 UserManager 类型的对象？</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot-版本">Spring Boot 版本<a href="#spring-boot-版本" class="hash-link" aria-label="Spring Boot 版本的直接链接" title="Spring Boot 版本的直接链接">​</a></h3>
<p>项目中用的 Spring Boot 版本是：2.0.3.RELEASE<br>
<!-- -->对象的 scope 是默认值，也就是 singleton</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="结果验证">结果验证<a href="#结果验证" class="hash-link" aria-label="结果验证的直接链接" title="结果验证的直接链接">​</a></h2>
<p>验证方式有很多,可以debug跟源码看看Spring容器中到底有几个UserManager对象,也可以直接从UserManager构造方法下手，看看哪几个构造方法被调用等等<br>
<!-- -->我们从构造方法下手，看看 UserManager 到底实例化了几次</p>
<p><img decoding="async" loading="lazy" alt="img_2.png" src="/my-website/zh-Hans/assets/images/img_2-a5f48deed72e7fd8cd5723ba50c785dd.png" width="1080" height="788" class="img_ev3q"></p>
<p>只有有参构造方法被调用了，无参构造方法岿然不动（根本没被调用<br>
<!-- -->既然 UserManager 构造方法只被调用了一次，那么前面的问题：到底注入的是哪个对象<br>
<!-- -->答案也就清晰了,没得选了呀，只能是@Configuration加@Bean创建的userName不为null的UserManager对象<br>
<!-- -->问题又来了：为什么不是 @Component 创建的 userName 为 null 的 UserManager 对象？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="源码解析">源码解析<a href="#源码解析" class="hash-link" aria-label="源码解析的直接链接" title="源码解析的直接链接">​</a></h2>
<p>@Configuration 与 @Component 关系很紧密</p>
<p><img decoding="async" loading="lazy" alt="img_3.png" src="/my-website/zh-Hans/assets/images/img_3-2a318fcc25c6fe8953520f269d3afafb.png" width="839" height="452" class="img_ev3q"></p>
<p>所以@Configuration 能够被 component scan</p>
<p>其中 ConfigurationClassPostProcessor 与@Configuration 息息相关，其类继承结构图如下：</p>
<p><img decoding="async" loading="lazy" alt="img_4.png" src="/my-website/zh-Hans/assets/images/img_4-4bc35a82fb9b24d5ed6475909c0ddc97.png" width="1080" height="275" class="img_ev3q"></p>
<p>它实现了 BeanFactoryPostProcessor 接口和 PriorityOrdered 接口，关于 BeanFactoryPostProcessor，</p>
<p>那么我们从 AbstractApplicationContext 的 refresh 方法调用的 invokeBeanFactoryPostProcessors(beanFactory)开始，来跟下源码</p>
<p><img decoding="async" loading="lazy" alt="img_5.png" src="/my-website/zh-Hans/assets/images/img_5-0b5892733b2b851cf99239c576af8a00.png" width="1079" height="546" class="img_ev3q"></p>
<p>此时完成了 com.lee.qsl 包下的 component scan ， com.lee.qsl 包及子包下的 UserConfig 、 UserController 和 UserManager
都被扫描出来</p>
<p>注意，此刻@Bean 的处理还未开始， UserManager 是通过@Component 而被扫描出来的；此时 Spring 容器中 beanDefinitionMap 中的
UserManager 是这样的</p>
<p><img decoding="async" loading="lazy" alt="img_6.png" src="/my-website/zh-Hans/assets/images/img_6-232fe852071b0ad138e4bac0092702a2.png" width="936" height="448" class="img_ev3q"></p>
<p>接下来一步很重要，与我们想要的答案息息相关</p>
<p><img decoding="async" loading="lazy" alt="img_7.png" src="/my-website/zh-Hans/assets/images/img_7-1daf7cf259009b9c8f67c66196b7b453.png" width="1079" height="546" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img_8.png" src="/my-website/zh-Hans/assets/images/img_8-a88b7c915e7d01e273fe5bc8adbbc20c.png" width="906" height="236" class="img_ev3q"></p>
<p>循环递归处理 UserConfig 、 UserController 和 UserManager ，把它们都封装成 ConfigurationClass ，递归扫描 BeanDefinition</p>
<p>循环完之后，我们来 看看 configClasses</p>
<p><img decoding="async" loading="lazy" alt="img_9.png" src="/my-website/zh-Hans/assets/images/img_9-5f7e34d4b363ba6f886ad99dde38e7ae.png" width="1079" height="546" class="img_ev3q"></p>
<p>UserConfig bean 定义信息中 beanMethods
中有一个元素 [BeanMethod<!-- -->:name<!-- -->=userManager,declaringClass=com.lee.qsl.config.UserConfig]</p>
<p>然后我们接着往下走，来仔细看看答案出现的环节</p>
<p>是不是有什么发现？@Component 修饰的 UserManager 定义直接被覆盖成了 @Configuration + @Bean 修饰的 UserManager 定义</p>
<p>Bean 定义类型也由 ScannedGenericBeanDefinition 替换成了 ConfigurationClassBeanDefinition</p>
<p>后续通过 BeanDefinition 创建实例的时候，创建的自然就是 @Configuration + @Bean 修饰的 UserManager ，也就是会反射调用
UserManager 的有参构造方法</p>
<p>自此，答案也就清楚了</p>
<p>Spring 其实给出了提示</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2021-10-03 20:37:33.697  INFO 13600 --- [           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean &#x27;userManager&#x27; with a different definition: replacing [Generic bean: class [com.lee.qsl.manager.UserManager]; scope=singleton; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [D:\qsl-project\spring-boot-bean-component\target\classes\com\lee\qsl\manager\UserManager.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=userConfig; factoryMethodName=userManager; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [com/lee/qsl/config/UserConfig.class]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-升级优化">Spring 升级优化<a href="#spring-升级优化" class="hash-link" aria-label="Spring 升级优化的直接链接" title="Spring 升级优化的直接链接">​</a></h2>
<p>可能 Spring 团队意识到了 info 级别太不显眼的问题，或者说意识到了直接覆盖的处理方式不太合理</p>
<p>所以在 Spring 5.1.2.RELEASE （Spring Boot 则是 2.1.0.RELEASE ）做出了优化处理</p>
<p>我们来具体看看</p>
<p><img decoding="async" loading="lazy" alt="img_10.png" src="/my-website/zh-Hans/assets/images/img_10-2d4d587e91b7098e7bc8295cc72469e3.png" width="1079" height="546" class="img_ev3q"></p>
<p>启动直接报错，Spring 也给出了提示</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The bean &#x27;userManager&#x27;, defined in class path resource [com/lee/qsl/config/UserConfig.class], could not be registered. A bean with that name has already been defined in file [D:\qsl-project\spring-boot-bean-component\target\classes\com\lee\qsl\manager\UserManager.class] and overriding is disabled.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们来跟下源码，主要看看与 Spring 5.0.7.RELEASE 的区别</p>
<p><img decoding="async" loading="lazy" alt="img_11.png" src="/my-website/zh-Hans/assets/images/img_11-34bf4bff4ed6cff88420b52fe163e2f6.png" width="1080" height="562" class="img_ev3q"></p>
<p>新增了配置项 allowBeanDefinitionOverriding 来控制是否允许 BeanDefinition 覆盖，默认情况下是不允许的</p>
<p>我们可以在配置文件中配置：spring.main.allow-bean-definition-overriding=true ，允许 BeanDefinition 覆盖</p>
<p>这种处理方式是更优的，将选择权交给开发人员，而不是自己偷偷的处理，已达到开发者想要的效果</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>Spring 5.0.7.RELEASE （ Spring Boot 2.0.3.RELEASE ） 支持@Configuration + @Bean 与@Component 同时作用于同一个类</p>
<p>启动时会给 info 级别的日志提示，同时会将@Configuration + @Bean 修饰的 BeanDefinition 覆盖掉@Component 修饰的
BeanDefinition</p>
<p>也许 Spring 团队意识到了上述处理不太合适，于是在 Spring 5.1.2.RELEASE 做出了优化处理</p>
<p>增加了配置项：allowBeanDefinitionOverriding ，将主动权交给了开发者，由开发者自己决定是否允许覆盖</p>
<p>补充
关于 allowBeanDefinitionOverriding ，前面讲的不对，后面特意去翻了下源码，补充如下</p>
<p>Spring 1.2 引进 DefaultListableBeanFactory 的时候就有了 private boolean allowBeanDefinitionOverriding = true;，默认是允许
BeanDefinition 覆盖</p>
<p><img decoding="async" loading="lazy" alt="img_12.png" src="/my-website/zh-Hans/assets/images/img_12-169a0cd3a7915170438397b65a584922.png" width="1043" height="853" class="img_ev3q"></p>
<p>Spring 4.1.2 引进了 isAllowBeanDefinitionOverriding()方法</p>
<p><img decoding="async" loading="lazy" alt="img_13.png" src="data:image/png;base64,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" width="760" height="194" class="img_ev3q"></p>
<p>Spring 自始至终默认都是允许 BeanDefinition 覆盖的，变的是 Spring Boot ， Spring Boot 2.1.0 之前没有覆盖 Spring 的
allowBeanDefinitionOverriding 默认值，仍是允许 BeanDefinition 覆盖的</p>
<p>Spring Boot 2.1.0 中 SpringApplication 定义了私有属性：allowBeanDefinitionOverriding</p>
<p><img decoding="async" loading="lazy" alt="img_14.png" src="/my-website/zh-Hans/assets/images/img_14-bb4940ca4c234e6fd76258f4bcd0072b.png" width="855" height="330" class="img_ev3q"></p>
<p>没有显示的指定值，那么默认值就是 false ，之后在 Spring Boot 启动过程中，会用此值覆盖掉 Spring 中的
allowBeanDefinitionOverriding 的默认值</p>
<p><img decoding="async" loading="lazy" alt="img_15.png" src="/my-website/zh-Hans/assets/images/img_15-0a3a00321f904a4475a3036bbb03ed9d.png" width="1080" height="746" class="img_ev3q"></p>
<p>关于 allowBeanDefinitionOverriding ，我想大家应该已经清楚了</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/VWeiTech/my-website/tree/main/docs/Java/20230309.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/my-website/zh-Hans/docs/Docker/20250211"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">docker pull镜像失败</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/my-website/zh-Hans/docs/Java/20230328"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Spring 事务—事务的传播机制</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#疑虑背景" class="table-of-contents__link toc-highlight">疑虑背景</a><ul><li><a href="#疑虑描述" class="table-of-contents__link toc-highlight">疑虑描述</a></li><li><a href="#spring-boot-版本" class="table-of-contents__link toc-highlight">Spring Boot 版本</a></li></ul></li><li><a href="#结果验证" class="table-of-contents__link toc-highlight">结果验证</a></li><li><a href="#源码解析" class="table-of-contents__link toc-highlight">源码解析</a></li><li><a href="#spring-升级优化" class="table-of-contents__link toc-highlight">Spring 升级优化</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/my-website/zh-Hans/docs/intro">Study Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/my-website/zh-Hans/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/VWeiTech" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>